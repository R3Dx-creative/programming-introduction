# 課題.ファイル操作

『クリップ集自動作成ツール』はファイルの仕分け作業が主要な機能の一つです。入門としてはちょうどいい課題なので、まずはRubyでのファイル操作に触れてみます。

## 準備

以下のようなフォルダとファイルを用意して課題に挑戦してください。

### 必要なフォルダ

以下のフォルダを用意してください。

* `0.Shared`
* `1.Queue`
* `2.Revenging`
* `3.Unranked`

### 必要なファイル

`0.Shared`フォルダに以下ファイルを追加してください。

* `0.txt`
* `1.txt`
* `2.txt`
* `3.txt`
* `4.txt`
* `5.txt`
* `6.txt`

### 構造

用意し終わると以下のような**階層構造**になっていると思います。

* 0.Shared
  * 0.txt
  * 1.txt
  * 2.txt
  * 3.txt
  * 4.txt
  * 5.txt
  * 6.txt
* 1.Queue
* 2.Revenging
* 3.Unranked

この状態を最初の状態として以下の問をクリアしてください。

## 問1(難易度: ★☆☆☆☆)

`0.Shared`フォルダ内すべてのファイルを`1.Queue`フォルダに移動するプログラムをRubyで書いてください。

キーワード: File, move

### 結果イメージ

* 0.Shared
  * 0.txt
  * 1.txt
  * 2.txt
  * 3.txt
  * 4.txt
  * 5.txt
  * 6.txt
* 1.Queue
* 2.Revenging
* 3.Unranked

↓

* 0.Shared
* 1.Queue
  * 0.txt
  * 1.txt
  * 2.txt
  * 3.txt
  * 4.txt
  * 5.txt
  * 6.txt
* 2.Revenging
* 3.Unranked

## 問2(難易度: ★★☆☆☆)

`Ranked.[date]`の`[date]`に任意の日付(yyyy-MM-dd形式)が入るフォルダを作成するプログラムをRubyで書いてください。

キーワード: mkdir, yyyy-MM-dd, Date, 日付の**フォーマット**

### 結果イメージ

日付(2021年5月17日)を入れる場合。

(テキストファイルは省略)

* 0.Shared
* 1.Queue
* 2.Revenging
* 3.Unranked

↓

* 0.Shared
* 1.Queue
* 2.Revenging
* 3.Unranked
* Ranked.2021-05-17

## 問3(難易度: ★★★☆☆)

以下の「集計結果」と「仕様」を参考に、`1.Queue`フォルダ内のファイルを仕分けるプログラムをRubyで書いてください。

* 1.Queue
  * 0.txt
  * 1.txt
  * 2.txt
  * 3.txt
  * 4.txt
  * 5.txt
  * 6.txt


### 集計結果
| ファイル名 | いいね数 |
| ---        | ---      |
| 0.txt      | 0        |
| 1.txt      | 5        |
| 2.txt      | 5        |
| 3.txt      | 6        |
| 4.txt      | 7        |
| 5.txt      | 5        |
| 6.txt      | 1        |

### 仕様
  * 集計結果の「いいね数」が5以上のファイルは`2.Revenging`フォルダに移動
  * それら以外は`3.Unranked`フォルダに移動

補足：集計結果をまとめたものは連想配列(Rubyの**ハッシュ**)を利用してください。

```ruby
result = {
    "0.txt" => 0,
    "1.txt" => 5,
    "2.txt" => 5,
    # ...(省略)
}
```

ファイルといいね数を保持するクラスを定義するのもアリです。(こちらの方が難易度は高いですが、できたらすばらしいです。)

## 問4(難易度: ★★★★☆)

問3の「仕様」を以下に置き換えて、`1.Queue`フォルダ内のファイルを仕分けるプログラムをRubyで書いてください。

### (前提)

フォルダとファイルの状態は以下とします。また、集計結果は問3と同じとします。

* 0.Shared
* 1.Queue
  * 0.txt
  * 1.txt
  * 2.txt
  * 3.txt
  * 4.txt
  * 5.txt
  * 6.txt
* 2.Revenging
* 3.Unranked

### 仕様
  * 集計結果の「いいね数」上位3つのファイルについては、`Ranked.[date]`(`[date]`は今日の日付)フォルダを作成し、そこに移動する。
    * 同列の場合、ファイル名が辞書順で若いものを優先。
  * その他のファイルのうち、「いいね数」が5以上のファイルは`2.Revenging`フォルダに移動
  * それら以外は`3.Unranked`フォルダに移動

キーワード: **ソート**, 文字列のソート, **スライス**

## 問5(難易度: ★★★★☆)

問4と同じ仕様で、`1.Queue`と`2.Revenging`のフォルダ内のファイルを仕分けるプログラムをRubyで書いてください。

### (前提)

フォルダとファイルの状態は以下とします。また、集計結果は問3と同じとします。

* 0.Shared
* 1.Queue
  * 0.txt
  * 5.txt
  * 6.txt
* 2.Revenging
  * 1.txt
  * 2.txt
  * 3.txt
  * 4.txt
* 3.Unranked

キーワード: map, flatten, メソッドチェーン

---

おつかれさまでした。ここまでできたら普通にすごい。
